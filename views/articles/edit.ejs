<!DOCTYPE html>
<html>
  <head>
    <% include ../partials/head.ejs %>
  </head>
  <body>
    <% include ../partials/nav.ejs %>

            <header>
                        <h1>Edit <%=article.title%></h1>

                        <nav>
                                <ul>

                                      <li>
                                              <a href="/">Home</a>
                                      </li>

                                      <li>
                                              <a href="/articles">Articles Index</a>
                                      </li>

                                      <li>
                                              <a href="/authors">Author List</a>
                                      </li>

                                      <li>
                                              <a href="/articles/new">Create New Article</a>
                                      </li>

                                      <li>
                                              <a href="/sessions/logout">Logout</a>
                                      </li>

                                </ul>
                        </nav>
            </header>

            <main>
                        <h2>Article Attributes:</h2>

                        <br>
            <div class="new">
                              <% if(userSession.username){ %>

                        <form action="/articles/<%=article._id%>?_method=PUT" method="post">

                            <select name="authorId">
                                <% for(let i = 0; i < author.length; i++) { %>
                                    <option
                                        value="<%=author[i]._id%>"
                                        <% if(author[i]._id.toString() === articleAuthor._id.toString()) { %>
                                          selected
                                        <% } %>
                                        >
                                        <%=author[i].name%>
                                    </option>
                                  <% } %>
                            </select>
                            Author: <%=userSession.username%>
            </div>

                          <input type="text" name="title" value="<%=article.title%>"/><br/>
                          <textarea name="body"><%=article.body%></textarea><br/>
                          <input type="submit" value="Update Article">
                        </form>
            </main>
            <div class="clearfix"></div>
            <% include ../partials/footer.ejs %>
  </body>
</html>
